<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue去哪儿项目总结 | ming的个人网站</title>
    <meta name="description" content="Welcome to come to my blog">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/assets/css/0.styles.70f2d267.css" as="style"><link rel="preload" href="/assets/js/app.f3f0b164.js" as="script"><link rel="preload" href="/assets/js/2.284f78c8.js" as="script"><link rel="preload" href="/assets/js/14.70e31408.js" as="script"><link rel="prefetch" href="/assets/js/10.d3bd6822.js"><link rel="prefetch" href="/assets/js/11.7be908fe.js"><link rel="prefetch" href="/assets/js/12.71222861.js"><link rel="prefetch" href="/assets/js/13.0e9f2f34.js"><link rel="prefetch" href="/assets/js/15.8e83af5f.js"><link rel="prefetch" href="/assets/js/16.3f82f6aa.js"><link rel="prefetch" href="/assets/js/17.9c893c24.js"><link rel="prefetch" href="/assets/js/18.8ce12f88.js"><link rel="prefetch" href="/assets/js/19.4539c1e6.js"><link rel="prefetch" href="/assets/js/20.8d6b15a2.js"><link rel="prefetch" href="/assets/js/21.aa90be3e.js"><link rel="prefetch" href="/assets/js/22.0741e8cf.js"><link rel="prefetch" href="/assets/js/23.26e38199.js"><link rel="prefetch" href="/assets/js/24.437832b0.js"><link rel="prefetch" href="/assets/js/25.3ac7a3f9.js"><link rel="prefetch" href="/assets/js/26.f3036c64.js"><link rel="prefetch" href="/assets/js/27.85d3ca2e.js"><link rel="prefetch" href="/assets/js/28.f59e28e7.js"><link rel="prefetch" href="/assets/js/29.74627ca0.js"><link rel="prefetch" href="/assets/js/3.c17543fc.js"><link rel="prefetch" href="/assets/js/30.7b42eae2.js"><link rel="prefetch" href="/assets/js/31.9c88f4b6.js"><link rel="prefetch" href="/assets/js/32.3302434b.js"><link rel="prefetch" href="/assets/js/33.bd99df5c.js"><link rel="prefetch" href="/assets/js/34.a20acac1.js"><link rel="prefetch" href="/assets/js/35.d2d4f756.js"><link rel="prefetch" href="/assets/js/36.18286c43.js"><link rel="prefetch" href="/assets/js/37.84831a8a.js"><link rel="prefetch" href="/assets/js/38.ce143c7c.js"><link rel="prefetch" href="/assets/js/39.11e44bd7.js"><link rel="prefetch" href="/assets/js/4.24ba765a.js"><link rel="prefetch" href="/assets/js/40.cb8f8018.js"><link rel="prefetch" href="/assets/js/41.f6a28df9.js"><link rel="prefetch" href="/assets/js/42.fbd48b3c.js"><link rel="prefetch" href="/assets/js/43.131d6d97.js"><link rel="prefetch" href="/assets/js/44.2c119204.js"><link rel="prefetch" href="/assets/js/45.198a5b50.js"><link rel="prefetch" href="/assets/js/46.c2f0e139.js"><link rel="prefetch" href="/assets/js/47.71dfa535.js"><link rel="prefetch" href="/assets/js/48.cb8ad619.js"><link rel="prefetch" href="/assets/js/49.cbeee829.js"><link rel="prefetch" href="/assets/js/5.e87ba801.js"><link rel="prefetch" href="/assets/js/50.ff87b9b9.js"><link rel="prefetch" href="/assets/js/51.8943f310.js"><link rel="prefetch" href="/assets/js/52.f08a077e.js"><link rel="prefetch" href="/assets/js/53.5b096969.js"><link rel="prefetch" href="/assets/js/54.39e8487d.js"><link rel="prefetch" href="/assets/js/55.581e549d.js"><link rel="prefetch" href="/assets/js/56.d60cbfa0.js"><link rel="prefetch" href="/assets/js/6.b35a0751.js"><link rel="prefetch" href="/assets/js/7.aa04d747.js"><link rel="prefetch" href="/assets/js/8.2805aa08.js"><link rel="prefetch" href="/assets/js/9.2159abe2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.70f2d267.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ming的个人网站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/page13/page1/" class="nav-link">
  前端技术
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人文章" class="dropdown-title"><span class="title">个人文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://segmentfault.com/u/helloxiaoming" target="_blank" rel="noopener noreferrer" class="nav-link external">
  segmentfault
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/shifengming" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/page13/page1/" class="nav-link">
  前端技术
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人文章" class="dropdown-title"><span class="title">个人文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://segmentfault.com/u/helloxiaoming" target="_blank" rel="noopener noreferrer" class="nav-link external">
  segmentfault
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/shifengming" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JQuery</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Github</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Http请求</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ajax</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>项目</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/page13/vue_element电商后台管理系统总结.html" class="sidebar-link">Vue_element电商后台管理系统总结</a></li><li><a href="/page13/vue去哪儿项目总结.html" class="active sidebar-link">vue去哪儿项目总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#项目地址" class="sidebar-link">项目地址</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#使用的技术栈" class="sidebar-link">使用的技术栈</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#项目目录" class="sidebar-link">项目目录</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#项目相关的npm依赖包" class="sidebar-link">项目相关的npm依赖包</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#项目环境准备" class="sidebar-link">项目环境准备</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#移动端300ms延迟" class="sidebar-link">移动端300ms延迟</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#_1px像素问题" class="sidebar-link">1px像素问题</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#样式重置" class="sidebar-link">样式重置</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#首页轮播占位" class="sidebar-link">首页轮播占位</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#样式穿透" class="sidebar-link">样式穿透</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#多页" class="sidebar-link">多页</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#城市选择页面节流" class="sidebar-link">城市选择页面节流</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#keep-alive优化请求" class="sidebar-link">keep-alive优化请求</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#详情页全局事件" class="sidebar-link">详情页全局事件</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#递归组件" class="sidebar-link">递归组件</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#keep-alive不缓存" class="sidebar-link">keep-alive不缓存</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#组件中name名字用途" class="sidebar-link">组件中name名字用途</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#webpack使用alias" class="sidebar-link">webpack使用alias</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#路径分配" class="sidebar-link">路径分配</a></li><li class="sidebar-sub-header"><a href="/page13/vue去哪儿项目总结.html#移动端访问" class="sidebar-link">移动端访问</a></li></ul></li><li><a href="/page13/vue饿了么项目总结.html" class="sidebar-link">vue饿了么项目总结</a></li><li><a href="/page13/react_antd后台管理系统总结.html" class="sidebar-link">react_antd后台管理系统总结</a></li><li><a href="/page13/vue音乐项目总结.html" class="sidebar-link">vue音乐项目总结</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue去哪儿项目总结"><a href="#vue去哪儿项目总结" class="header-anchor">#</a> vue去哪儿项目总结</h1> <h2 id="项目地址"><a href="#项目地址" class="header-anchor">#</a> 项目地址</h2> <div class="language- extra-class"><pre class="language-text"><code>https://github.com/shifengming/Tranvel
</code></pre></div><h2 id="使用的技术栈"><a href="#使用的技术栈" class="header-anchor">#</a> 使用的技术栈</h2> <div class="language- extra-class"><pre class="language-text"><code>Vue：Vue、Vue-router、Vuex、Vue-cli

插件：vue-awesome-swiper、better-scroll、axios

CSS的预处理框架：stylus

api：后台数据接口
</code></pre></div><h2 id="项目目录"><a href="#项目目录" class="header-anchor">#</a> 项目目录</h2> <div class="language- extra-class"><pre class="language-text"><code>README.md		//项目的说明文件
package.json		//第三方依赖包配置
package-lock.json	//帮助我们去确定安装的第三方依赖包的具体的版本，保持团队编程的统一
LICENSE		//开源协议的说明
index.html	//项目默认的首页
.postcssrc.js	//是对postcss的配置项
.gitgnore	//不需要上传到git上的文件管理
.eslintrc.js	//对代码进行检验，是否标准
.eslintignore	//配置不需要eslintrc检测工具检测的文件
.editorconfig	//配置编辑器总风格统一的自动化格式的语法
.babelrc	//做一些语法的转换，编译成浏览器所能识别的代码
static		//目录下放的是一些静态资源，静态图片，静态数据，和后续模拟json数据
node_modules	//项目中需要用到的第三方node包
src		//放的是项目的源代码
src/main.js 	//整个项目的入口文件
src/app.vue	//整个项目最原始的根组件
src/router/index.js	//项目的路由放置位置
src/components		//项目里要用的一些小组件
src/assets	//项目中需要用到的图片
config		//放置项目配置文件
config/index.js		//放基础配置
config/dev.env.js	//开发环境配置信息
config/prod.env.js	//线上环境配置信息
build		//放置项目打包的webpack配置信息，vue-cli会自动构建
build/webpack.base.conf.js	//基础的webpack配置信息
build/webpack.dev.conf.js	//开发环境的webpack配置信息
build/webpack.prod.conf.js	//线上环境的webpack配置项
</code></pre></div><h2 id="项目相关的npm依赖包"><a href="#项目相关的npm依赖包" class="header-anchor">#</a> 项目相关的npm依赖包</h2> <div class="language- extra-class"><pre class="language-text"><code>fastClick：用来处理移动端click事件300毫秒延迟

Stylus: CSS预处理器框架

Stylus-loader

Vue-awesome-swiper：轮播插件

Axios：实现ajax

Better-scroll：scroll插件
</code></pre></div><h2 id="项目环境准备"><a href="#项目环境准备" class="header-anchor">#</a> 项目环境准备</h2> <p>下载地址(nodejs.org/en/),然后在安装node的时候npm 也被下载下来了</p> <p><img src="https://user-gold-cdn.xitu.io/2019/9/3/16cf6b4d606e9abc?w=1118&amp;h=639&amp;f=png&amp;s=54247" alt="cmd-markdown-logo"></p> <p>查看node是否安装好</p> <p><img src="https://user-gold-cdn.xitu.io/2019/9/3/16cf6b7089c06024?w=182&amp;h=94&amp;f=png&amp;s=1912" alt="cmd-markdown-logo"></p> <p>在码云上新建一个项目，用来管理代码</p> <p><img src="https://user-gold-cdn.xitu.io/2019/9/3/16cf6b7da493b5ad?w=1055&amp;h=285&amp;f=png&amp;s=26730" alt="cmd-markdown-logo"></p> <p>本地克隆刚才创建的项目</p> <p><img src="https://user-gold-cdn.xitu.io/2019/9/3/16cf6b8b78053578?w=584&amp;h=131&amp;f=png&amp;s=7928" alt="cmd-markdown-logo"></p> <p>使用脚手架Vue Cli使用webpack构建项目</p> <div class="language- extra-class"><pre class="language-text"><code>npm install -g vue-cli
</code></pre></div><p>创建项目</p> <div class="language- extra-class"><pre class="language-text"><code>Vue init webpack Travel
</code></pre></div><p>运行项目</p> <div class="language- extra-class"><pre class="language-text"><code>npm run dev
</code></pre></div><p>提交代码</p> <div class="language- extra-class"><pre class="language-text"><code>首先使用git status查看仓库状态
然后使用git add . 将代码提交到缓存区
git commit -am “注释”
git push 将代码提交到码云
</code></pre></div><p>最后在码云上看一下效果</p> <p><img src="https://user-gold-cdn.xitu.io/2019/9/3/16cf6bcd40adbd61?w=1117&amp;h=558&amp;f=png&amp;s=70776" alt="cmd-markdown-logo"></p> <h2 id="移动端300ms延迟"><a href="#移动端300ms延迟" class="header-anchor">#</a> 移动端300ms延迟</h2> <p>移动端浏览器click事件为什么会有300ms的延迟呢？因为在手机上有个双击方案 —— 在手机上快速点击两下，实现页面放大；再次双击，恢复到原始比例</p> <p>那它是如何实现的呢？浏览器在捕捉到第一次点击事件后，会等待一段时间，如果在这段时间内，用户没有再次进行点击操作的话，就执行单击事件；如果用户进行了第二次点击操作的话，就会执行双击事件。这段等待的时间大约300ms</p> <p>如何解决这个延迟呢？有很多方法，这里推荐两种比较简单的方法</p> <h3 id="第一种"><a href="#第一种" class="header-anchor">#</a> 第一种</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1,minimum-scale=1, user-scalable=no&quot;&gt;

width=device-width 宽度为设备宽度
initial-scale=1 初始比例为1
maximum-scale=1 最大比例为1
minimum-scale=1 最小比例为1
user-scalable=no 用户不能进行放大缩小
</code></pre></div><h3 id="第二种"><a href="#第二种" class="header-anchor">#</a> 第二种</h3> <p>引入第三方库fastclick</p> <div class="language- extra-class"><pre class="language-text"><code>npm install fastclick --save
</code></pre></div><p>因为所有页面都要引入，所以在入口处统一引入就可以了</p> <div class="language- extra-class"><pre class="language-text"><code>import FastClick from 'fastclick'

FastClick.attach(document.body)
</code></pre></div><h2 id="_1px像素问题"><a href="#_1px像素问题" class="header-anchor">#</a> 1px像素问题</h2> <p>红色边框是用border-bottom: 1px solid red;写的，在手机上明显可以看出它不是1px</p> <p><img src="https://user-gold-cdn.xitu.io/2019/3/1/16938c149319c1e2?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="cmd-markdown-logo"></p> <p>怎么解决这种问题？</p> <p>推荐一种：伪类 + transform</p> <div class="language- extra-class"><pre class="language-text"><code>.border1
  height: .5rem
  position: relative
.border1:before
  position: absolute
  top:-.5rem
  left:0
  content: ''
  width:100%
  height:1px
  border-top:1px solid rgba(0,0,0,.3)
  transform: scaleY(0.5)
</code></pre></div><p>这种方式就是把原先元素的border去掉，然后利用:before或者:after重做border ，并transform的scale缩小一半，原先的元素相对定位，新做的border绝对定位</p> <h2 id="样式重置"><a href="#样式重置" class="header-anchor">#</a> 样式重置</h2> <p>网上有很多reset.css找一份引入到项目中</p> <h2 id="首页轮播占位"><a href="#首页轮播占位" class="header-anchor">#</a> 首页轮播占位</h2> <p><img src="https://user-gold-cdn.xitu.io/2019/9/7/16d09e0517bf5c8d?w=1242&amp;h=652&amp;f=jpeg&amp;s=237698" alt="cmd-markdown-logo"></p> <p>图片是可替代资源，在页面显然时，会先将页面中静态的内容渲染上去，等数据返回后，在进行重新渲染，这样页面就会出现抖动，影响用户体验，同时性能也比较低。</p> <p>可以用下面的css代码对这些可替换资源先进行占位，页面大体框架在第一次渲染后就能呈现给用户，数据获取到后，替换相应的内容就可，就不会出现抖动了</p> <div class="language- extra-class"><pre class="language-text"><code>.icon-img
  overflow: hidden
  width: 100%
  height: 0
  padding-bottom: 100%
</code></pre></div><h2 id="样式穿透"><a href="#样式穿透" class="header-anchor">#</a> 样式穿透</h2> <p><img src="https://user-gold-cdn.xitu.io/2019/9/7/16d09e0517bf5c8d?w=1242&amp;h=652&amp;f=jpeg&amp;s=237698" alt="cmd-markdown-logo"></p> <p>在子组件中实现在这样的布局，需要用到样式穿透，不然是无法滚动下半部分的</p> <div class="language- extra-class"><pre class="language-text"><code>.icons &gt;&gt;&gt; .swiper-container
 height: 0
 padding-bottom:50%
</code></pre></div><h2 id="多页"><a href="#多页" class="header-anchor">#</a> 多页</h2> <p><img src="https://user-gold-cdn.xitu.io/2019/9/7/16d09e0517bf5c8d?w=1242&amp;h=652&amp;f=jpeg&amp;s=237698" alt="cmd-markdown-logo"></p> <p>现在上面的轮播，一页上有8个icon，此时如果需求变成了9个，怎样才能做到在不改动代码的前提下，能实现任意数量的icon</p> <p>可以用计算属性computed对iconList进行监听：</p> <ul><li><p>在Home.vue首先定义了iconList:[]通过属性传递给了Icon.vue组件</p></li> <li><p>在Icons.vue中通过props接收到了iconList数据</p></li> <li><p>使用computed之所以能对iconList监听，是因为刚开始传递过来的iconList是空数组，当获取到数据之后，在传递过来iconList是有值得，iconList一旦发生了变化，computed就能捕捉到</p></li> <li><p>computed中还有一个计算属性showIconList,它的用途是：</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code> 1，刚开始渲染的时候，由于iconList是一个空数组，直接将空数组渲染上去了
 2，当有了数据之后，又会进行第二次渲染，此时就会看到，轮播始终在最后一页
 3，使用v-if=showIconList是为了不让它在空数组时渲染，而是要等到有数据后在渲染
 4，所以swiper在初次创建是应该要用完整的数据来创建，而不是要空数据创建
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&lt;swiper :options=&quot;swiperOption&quot;&gt;
 &lt;swiper-slide v-for=&quot;(page,index) of pages&quot; :key=&quot;index&quot; v-if=&quot;showIconList&quot;&gt;
    &lt;div class=&quot;icon&quot; v-for=&quot;item of page&quot; :key=&quot;item.id&quot;&gt;
      &lt;div class=&quot;icon-img&quot;&gt;
        &lt;img class=&quot;icon-img-content&quot; :src=&quot;item.iconUrl&quot; alt=&quot;&quot;&gt;
   &lt;/div&gt;
      &lt;p class=&quot;icon-desc&quot;&gt;{{item.desc}}&lt;/p&gt;
  &lt;/div&gt;
 &lt;/swiper-slide&gt;
&lt;/swiper&gt;
computed: {
  pages () {
   const pages = []
   this.iconList.forEach((item, index) =&gt; {
    const page = Math.floor(index / 8)      //每页是 8 个，index / 8 能获取到页数
     if (!pages[page]) {   //初始化每一项
      pages[page] = []
    }
    pages[page].push(item)  //变成新数组
   })
   return pages
  },
  showIconList () {
   return this.iconList.length
  }
}
</code></pre></div><h2 id="城市选择页面节流"><a href="#城市选择页面节流" class="header-anchor">#</a> 城市选择页面节流</h2> <p>手指在城市字母表中滑动时，会触发无数次handleTouchMove这个函数，这就对性能影响很大</p> <p>函数节流：通过设定一个时间周期，只要在这个周期内函数就不执行</p> <div class="language- extra-class"><pre class="language-text"><code>ihandleTouchMove (e) {
 if (this.touchStatus) {
  if (this.timer) {
   clearTimeout(this.timer)
  }
  this.timer = setTimeout(() =&gt; {
   const touchY = e.touches[0].clientY - 79
   const index = Math.floor((touchY - this.startY) / 20)
   if (index &gt;= 0 &amp;&amp; index &lt; this.letters.length) {
    this.$emit('change', this.letters[index])
   }
  }, 10)
 }
}
</code></pre></div><p>这里设置的周期是10ms，10ms这个代码只会执行一次，大大优化了性能</p> <h2 id="keep-alive优化请求"><a href="#keep-alive优化请求" class="header-anchor">#</a> keep-alive优化请求</h2> <p>只发送一次请求</p> <p>每次点击城市或者回到首页时，都会重新发送一个ajax请求，因为当路由切换的时候，这个组件就会被重新渲染，组件一被重新渲染，mounted这个钩子函数就会被执行。这样就会对性能造成比较大的影响</p> <p>Vue 也考虑到了这一点，为我们提供了一个keep-alive的标签</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;keep-alive&gt;
   &lt;router-view/&gt;
&lt;/keep-alive&gt;
</code></pre></div><p>路由的内容被加载过一次之后，就把路由的内容放到内存之中，下次在进这个路由的时候不需要再重新渲染组件了，只需你从内容里把以前的内容拿出来显示就可以了</p> <p>城市改变再发送请求</p> <p>按照上面这样优化，当我改变城市时，它也不会发送请求，因为这一块用的是内存里的数据，那么这个选择曾是功能就变得有名无实，那该怎么改进呢？</p> <p>当我们使用了keep-alive标签后，会自动执行钩子函数activated，而mounted钩子函数是不会被执行的</p> <div class="language- extra-class"><pre class="language-text"><code>activated () {
    if (this.lastCity !== this.city) {
      this.lastCity = this.city
      this.getHomeInfo()
    }
}
</code></pre></div><h2 id="详情页全局事件"><a href="#详情页全局事件" class="header-anchor">#</a> 详情页全局事件</h2> <p>详情页绑定了一个全局事件，当我在详情页面中滚动，这个样写没有问题，但是当我去到其他页面，在滚动时，你就会发现，刚刚你绑定在详情页中的滚动事件，在这个页面也被执行了，这肯定是有问题的</p> <p>其实在我们使用了keep-alive标签后，会有两个生命周期函数分别是：activated、deactivated</p> <div class="language- extra-class"><pre class="language-text"><code>activated：页面展示的时候被执行

deactivated：页面被隐藏或者页面即将被替换成新的页面时被执行
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>activated () {
    window.addEventListener('scroll', this.handleScroll)
},
deactivated () {
    window.removeEventListener('scroll', this.handleScroll)
}
</code></pre></div><p>这段代码是页面被展示的执行scroll，页面被隐藏的时候移除scroll事件</p> <h2 id="递归组件"><a href="#递归组件" class="header-anchor">#</a> 递归组件</h2> <p>递归组件就是在我组件的自身去调用组件的自身</p> <p>如何实现 一级标题，二级标题，三级标题？</p> <div class="language- extra-class"><pre class="language-text"><code>data () {
    return {
        &quot;categoryList&quot;: [{
            &quot;title&quot;: &quot;成人票&quot;,
            &quot;children&quot;: [{
                &quot;title&quot;: &quot;成人三馆联票&quot;,
                &quot;children&quot;: [{
                    &quot;title&quot;: &quot;成人三馆联票 - 某一销售店&quot;
                }]
            }, {
                &quot;title&quot;: &quot;成人五馆联票&quot;
            }]
        }, {
            &quot;title&quot;: &quot;儿童票&quot;
        }, {
            &quot;title&quot;: &quot;学生票&quot;
        }, {
            &quot;title&quot;: &quot;特惠票&quot;
        }]
    }
}
</code></pre></div><p>对一层标题用v-for来进行循环，二、三层标题该怎么显示出来呢？在写组件的时候，都会写一个name的属性，它其中一个用途就是——递归组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;div
    class=&quot;item&quot;
    v-for=&quot;(item, index) of categoryList&quot;
    :key=&quot;index&quot;
&gt;
    &lt;div class=&quot;item-title&quot;&gt;
      &lt;span class=&quot;item-title-icon&quot;&gt;&lt;/span&gt;
      {{item.title}}
    &lt;/div&gt;
    &lt;div class=&quot;item-title-children&quot; v-if=&quot;item.children&quot;&gt;  //判断是否有数据中是否有 children 这个属性，如果有就使用递归组件
      &lt;detail-list :categoryList=&quot;item.children&quot;&gt;&lt;/detail-list&gt;     //把 children 传给递归组件
    &lt;/div&gt;
 &lt;/div&gt;
</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2019/9/7/16d0a4bd5f3d454f?w=305&amp;h=227&amp;f=png&amp;s=13260" alt="cmd-markdown-logo"></p> <h2 id="keep-alive不缓存"><a href="#keep-alive不缓存" class="header-anchor">#</a> keep-alive不缓存</h2> <p>在Detail.vue页面中，当我点击了其他景点后，它也是不会发送请求的，那么Detail页面就不会重新渲染了</p> <p>可以使用keep-alive的exclude属性，给它默认设置为Detail，用途是每次进入Detail页面都会发送请求</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;keep-alive exclude=&quot;Detail&quot;&gt;   //使用 exclude 属性，可以设置不需要缓存的页面
   &lt;router-view/&gt;
&lt;/keep-alive&gt;
</code></pre></div><h2 id="组件中name名字用途"><a href="#组件中name名字用途" class="header-anchor">#</a> 组件中name名字用途</h2> <div class="language- extra-class"><pre class="language-text"><code>递归组件可以用到
当你相对某个页面想取消缓存的时候会用到
在 Vue 的开发调试工具中会用到
</code></pre></div><h2 id="webpack使用alias"><a href="#webpack使用alias" class="header-anchor">#</a> webpack使用alias</h2> <p>项目中有许多地方需要引入一些公用样式，此项目样式是用stylus写了，比如很多地方都需要用到主题色，统一写在一个文件中后期维护很方便。但是引入这个文件很麻烦：</p> <div class="language- extra-class"><pre class="language-text"><code>../../../assets/styles/varible.css
</code></pre></div><p>如果每个页面都这样引入文件，一方面写的不优雅，另一方面维护也不方便</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
  ...
  resolve: {
    extensions: ['.js', '.vue', '.json'],
    alias: {
      'vue$': 'vue/dist/vue.esm.js',
      '@': resolve('src'),
      'styles': resolve('src/assets/styles')
    }
  }
}
</code></pre></div><p>在build/webpack.base.config.js文件中找到resolve下alias，它可以对路径进行简化操作，项目中引入这个文件只需要写styles/varible.css即可</p> <h2 id="路径分配"><a href="#路径分配" class="header-anchor">#</a> 路径分配</h2> <p>在自己开发中，经常需要自己mock数据</p> <div class="language- extra-class"><pre class="language-text"><code>axios.get('/api/detail.json', {
    params: {
      id: this.$route.params.id
    }
}).then(this.getDetailInfoSucc)
</code></pre></div><p>这样写路径是访问不到自己mock的数据的，那应该怎么写呢？</p> <div class="language- extra-class"><pre class="language-text"><code>axios.get('/static/mock/detail.json', {
    params: {
      id: this.$route.params.id
    }
}).then(this.getDetailInfoSucc)
</code></pre></div><p>把/api改成/static/mock/这样访问到我们本地的数据了，但是这样有风险的，上线前你需要改回/api，很容易出错，造成bug</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
  dev: {
    ...
    proxyTable: {
      '/api':{
        target: 'http://localhost:8080',
        pathRewrite: {
          '^/api':'/static/mock'
        }
      }
    }
 }
</code></pre></div><p>在config/index.js文件中找到dev下的proxyTable，它可以代理路径，我们在项目中写/api，通过proxyTable可以自动找到/static/mock这个目录</p> <h2 id="移动端访问"><a href="#移动端访问" class="header-anchor">#</a> 移动端访问</h2> <p>1、在config文件夹中的index.js中的host选项，将本地localhost改为0.0.0.0</p> <p><img src="https://user-gold-cdn.xitu.io/2019/9/8/16d0c80506fe688a?w=717&amp;h=381&amp;f=png&amp;s=56090" alt="cmd-markdown-logo"></p> <p>2、在cmd中输入ipconfig查看本地IP</p> <p><img src="https://user-gold-cdn.xitu.io/2019/9/8/16d0c860826f523d?w=653&amp;h=345&amp;f=png&amp;s=16385" alt="cmd-markdown-logo"></p> <p>3、在浏览器中输入IP地址</p> <p><img src="https://user-gold-cdn.xitu.io/2019/9/8/16d0c8b84dc8105d?w=498&amp;h=555&amp;f=png&amp;s=89058" alt="cmd-markdown-logo"></p> <p>4、端口号访问(http://172.20.10.4:8080),将这个网址复制到网页版“草料二维码”中，用QQ扫码访问即可</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/page13/vue_element电商后台管理系统总结.html" class="prev">
        Vue_element电商后台管理系统总结
      </a></span> <span class="next"><a href="/page13/vue饿了么项目总结.html">
        vue饿了么项目总结
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f3f0b164.js" defer></script><script src="/assets/js/2.284f78c8.js" defer></script><script src="/assets/js/14.70e31408.js" defer></script>
  </body>
</html>
