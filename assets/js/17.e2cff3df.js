(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{190:function(a,e,s){"use strict";s.r(e);var t=s(0),r=Object(t.a)({},(function(){this._self._c;return this._m(0)}),[function(){var a=this,e=a._self._c;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"学习webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#学习webpack"}},[a._v("#")]),a._v(" 学习webpack")]),a._v(" "),e("h2",{attrs:{id:"什么是webpack？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是webpack？"}},[a._v("#")]),a._v(" 什么是webpack？")]),a._v(" "),e("p",[a._v("webpack可以看做是模拟打包机：它做的事情是，分析你的项目结构，找到JavaScript模块以及其他的一些浏览器不能直接运行的拓展语言(Scss，TypeScript等)，并将其打包为合适的格式以供浏览器使用")]),a._v(" "),e("h2",{attrs:{id:"webpack可以做哪些事？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack可以做哪些事？"}},[a._v("#")]),a._v(" webpack可以做哪些事？")]),a._v(" "),e("ul",[e("li",[a._v("代码的转换(比如把es6转换成es5，把less转换成sass)")]),a._v(" "),e("li",[a._v("文件优化(比如在打包的过程中，压缩代码体积，合并文件等)")]),a._v(" "),e("li",[a._v("代码分割(比如在开发多页面的时候，公共页面的抽离，路由懒加载的功能)")]),a._v(" "),e("li",[a._v("模块合并(比如把多个模块合并成一个模块)")]),a._v(" "),e("li",[a._v("自动刷新(帮我们启动一个本地服务，来实现代码变更后可以更新我们的页面)")]),a._v(" "),e("li",[a._v("代码效验(校验我们的代码是否符合规范)")]),a._v(" "),e("li",[a._v("自动发布(打包完成后可以实现一个自动完成的功能，把打包后的代码发布到服务器上)")])]),a._v(" "),e("h2",{attrs:{id:"需要提前掌握的内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#需要提前掌握的内容"}},[a._v("#")]),a._v(" 需要提前掌握的内容")]),a._v(" "),e("ul",[e("li",[a._v("需要node基础，以及npm的使用")]),a._v(" "),e("li",[a._v("掌握es6语法")])]),a._v(" "),e("h2",{attrs:{id:"webpack的基础配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack的基础配置"}},[a._v("#")]),a._v(" webpack的基础配置")]),a._v(" "),e("h3",{attrs:{id:"安装本地的webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装本地的webpack"}},[a._v("#")]),a._v(" 安装本地的webpack")]),a._v(" "),e("ul",[e("li",[a._v("在桌面上新建了一个文件夹webpack")]),a._v(" "),e("li",[a._v("yarn init -y 初始化项目")]),a._v(" "),e("li",[a._v("yarn add webpack webpack-cli -D 安装这两个依赖")]),a._v(" "),e("li",[a._v("新建一个打包的目录src")])]),a._v(" "),e("h3",{attrs:{id:"webpack可以进行零配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack可以进行零配置"}},[a._v("#")]),a._v(" webpack可以进行零配置")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("打包工具，把JS模块进行打包然后输出")])]),a._v(" "),e("li",[e("p",[a._v("打包支持js的模块化")])])]),a._v(" "),e("h3",{attrs:{id:"手动配置webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#手动配置webpack"}},[a._v("#")]),a._v(" 手动配置webpack")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("默认配置文件的名字 webpack.config.js")]),a._v(" "),e("p",[a._v("webpack.config.js文件：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("//webpack是node写出来的node的写法\nlet path = require('path')\t//从系统里导出一个path模块(审核文件路径)\nconsole.log(path.resolve('dist'))\nmodule.exports = {\n    mode: 'development',//模式 默认两种 production development开发模式\n    entry: './src/index.js',//入口\n    output:{\n        filename:'bundle.js',//打包后的文件名\n        path: path.resolve(__dirname,'build')//路径必须是一个绝对路径,当前目录下产生一个dist目录(path.resole把dirname和dist连接起来，build会自动找到webpack就会去webpack.config.js文件里面)\n    }\n}\n//bundle.js就是打包出来的结果\n")])])]),e("p",[a._v("src/a.js文件：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("// 写一些node语法\n//默认导出\n//导出以后去index.js里面引用它\nmodule.exports = 'sxm';\n")])])]),e("p",[a._v("src/index.js文件：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let str = require('./a.js');\nconsole.log(str);\n")])])]),e("p",[a._v("然后在控制台npx webpack打包")]),a._v(" "),e("p",[a._v("生成了一个build目录,里面有buildle.js,然后我新建了一个index.html文件")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    <title>Document</title>\n</head>\n<body>\n//引入build.js\n    <script src="./bundle.js"><\/script>\n</body>\n</html>\n')])])]),e("p",[a._v("再执行index.html文件，就可以看到打印出来的结果了")])])]),a._v(" "),e("h3",{attrs:{id:"配置脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置脚本"}},[a._v("#")]),a._v(" 配置脚本")]),a._v(" "),e("p",[a._v("如果觉得命名太长了，就到package.json里面配置一些脚本")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('  "scripts": {\n    "build": "webpack --config webpack.config.js",\n    "dev": "webpack-dev-server"\n  },\n')])])]),e("p",[a._v("然后在命令行就可以直接npm run build")]),a._v(" "),e("p",[a._v("--config指的是添加配置文件")]),a._v(" "),e("p",[a._v("webpack.config.js文件名")]),a._v(" "),e("h2",{attrs:{id:"html插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#html插件"}},[a._v("#")]),a._v(" HTML插件")]),a._v(" "),e("p",[a._v("通过执行这个命令在输出目录下执行")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add webpack-dev-server -D \n")])])]),e("p",[a._v("配一个脚本，生成内存中的打包")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("npx webpack-dev-server \n")])])]),e("p",[a._v("希望能进到build目录")]),a._v(" "),e("p",[a._v("就在webpack.config.js里面插入")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("devServer: {//开发服务器的配置\n        port: 3000,\n        progress: true,//希望在内存中打包看到一个进度条\n        contentBase:'./build',//希望./build目录作为静态目录\n        compress: true\n    },\n")])])]),e("p",[a._v("安装")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add html-webpack-plugin -D\n")])])]),e("p",[a._v("再webpack.config.js里面添加")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let HtmlWebpackPlugin = require('html-webpack-plugin')\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("    plugins:[//数组 放着所有的webpack插件\n        new HtmlWebpackPlugin({\n        //在src里面新建一个index.html文件\n            template: './src/index.html',\n            filename: 'index.html',\n            minify:{\n                removeAttributeQuotes:true,//删除属性的双引号\n                collapseWhitespace: true,//折叠空行\n            },\n            hash: true\n        })\n    ]\n")])])]),e("h2",{attrs:{id:"配置webpack中css模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置webpack中css模块"}},[a._v("#")]),a._v(" 配置webpack中css模块")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add css-loader style-loader -D\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add less less-loader -D\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add mini-css-extract-plugin -D\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add postcss-loader autoprefixer\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add uglifyjs-webpack-plugin -D\n")])])]),e("h3",{attrs:{id:"webpack-config-js里配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js里配置"}},[a._v("#")]),a._v(" webpack.config.js里配置")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("//webpack是node写出来的node的写法\nlet path = require('path')\nlet HtmlWebpackPlugin = require('html-webpack-plugin')\nlet MiniCssExtractPlugin = require('mini-css-extract-plugin');\nlet OptimizeCss = require('optimize-css-assets-webpack-plugin')\nlet UglifyJsPlugin = require('uglifyjs-webpack-plugin')\nmodule.exports = {\n    optimization:{//优化项\n        minimizer:[\n            new UglifyJsPlugin({\n                cache: true,\n                parallel: true,\n                sourceMap: true\n            }),\n            new OptimizeCss()\n        ]\n    },\n    mode: 'development',//模式 默认两种 production development开发模式\n    entry: './src/index.js',//入口\n    output:{\n        filename:'bundle.[hash:8].js',//打包后的文件名\n        path: path.resolve(__dirname,'build')//路径必须是一个绝对路径,当前目录下产生一个dist目录\n    },\n    plugins:[//数组 放着所有的webpack插件\n        new HtmlWebpackPlugin({\n            template: './src/index.html',\n            filename: 'index.html',\n        }),\n        new MiniCssExtractPlugin({\n            filename:'main.css'\n        })\n    ],\n    module:{\n        //loader\n        rules:[//规则 css-loader解析@import这种语法的\n            //style-loader 他是把css插入到head的标签中\n            //loader的特点  希望单一\n            //loader的用法  字符串只用一个loader\n            //多个loader需要[]\n            //loader的顺序，默认是从右向左执行\n            //loader还可以写成 对象方式\n            {\n                //可以处理less文件\n                test:/\\.css$/,\n                use:[\n                    MiniCssExtractPlugin.loader,\n                    'css-loader',\n                    'postcss-loader',\n                    \n                ]\n            },\n            {\n                    //可以处理less文件 sass stylus node-sass sass-loader\n                    // stylus stylus-loader\n                    test:/\\.less$/,\n                    use:[\n                        MiniCssExtractPlugin.loader,\n                        'css-loader',//@import解析路径\n                        'postcss-loader',\n                        'less-loader'//把less转换成css\n                    ]\n            }\n        ]\n    }\n}\n")])])]),e("h3",{attrs:{id:"pastcss-config-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pastcss-config-js"}},[a._v("#")]),a._v(" pastcss.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("module.exports = {\n    plugins:[require('autoprefixer')]\n}\n")])])]),e("h3",{attrs:{id:"src-index-css"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-index-css"}},[a._v("#")]),a._v(" src/index.css")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("@import './a.css';\nbody{\n    background: red;\n    transform: rotate(45deg);\n}\n")])])]),e("h3",{attrs:{id:"src-a-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-a-js"}},[a._v("#")]),a._v(" src/a.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("// 写一些node语法\n//默认导出\n//导出以后去index.js里面引用它\nmodule.exports = 'sxm';\n")])])]),e("h3",{attrs:{id:"src-a-css"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-a-css"}},[a._v("#")]),a._v(" src/a.css")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("body{\n    color:  yellow;\n}\n")])])]),e("h3",{attrs:{id:"src-index-html"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-index-html"}},[a._v("#")]),a._v(" src/index.html")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("<style>\n    body{\n        background: pink;\n    }\n</style>\n<body>\n    \x3c!-- 模板 --\x3e\n    <div>内容</div>\n</body>\n")])])]),e("h3",{attrs:{id:"src-index-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-index-js"}},[a._v("#")]),a._v(" src/index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let str = require('./a.js');\nconsole.log(str);\nrequire('./index.css')\nrequire('./index.less')\n")])])]),e("h3",{attrs:{id:"index-less"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#index-less"}},[a._v("#")]),a._v(" index.less")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("body{\n    div{\n        border: 1px solid #dadade\n    }\n}\n")])])]),e("h2",{attrs:{id:"转换成es6语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#转换成es6语法"}},[a._v("#")]),a._v(" 转换成es6语法")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add babel-loader @babel/core @babel/preset-env -D\n")])])]),e("h3",{attrs:{id:"webpack-config-js添加代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js添加代码"}},[a._v("#")]),a._v(" webpack.config.js添加代码")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("{\n                test:/\\.js$/,\n                use:{\n                    loader:'babel-loader',\n                    options:{//用babel-loader 需要把es6转换成es5\n                        presets:[\n                            '@babel/preset-env'\n                        ]\n                    }\n                }\n            },\n")])])]),e("h3",{attrs:{id:"npx-webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npx-webpack"}},[a._v("#")]),a._v(" npx webpack")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("npx webpack //看是否把webpack进行转换\n")])])]),e("h3",{attrs:{id:"src-index-js里添加"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-index-js里添加"}},[a._v("#")]),a._v(" src/index.js里添加")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let fn = () => {\n    console.log('log')\n}\nfn();\n")])])]),e("h2",{attrs:{id:"全局变量引入问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#全局变量引入问题"}},[a._v("#")]),a._v(" 全局变量引入问题")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add jquery\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add expose-loader\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("1,expose-loader 暴露到window上\n2,providePlugin 给每个人提供一个$\n3,引入不打包方式\n")])])]),e("h2",{attrs:{id:"图片处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#图片处理"}},[a._v("#")]),a._v(" 图片处理")]),a._v(" "),e("h3",{attrs:{id:"在js中创建图片来引入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在js中创建图片来引入"}},[a._v("#")]),a._v(" 在js中创建图片来引入")]),a._v(" "),e("p",[a._v("file-loader默认会在内部生成一张图片，到build目录下，把生成的图片的名字返回回来")]),a._v(" "),e("p",[a._v("src/index.js里面")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("import logo from './logo.jpg'//把图片引入，返回的结果是一个新的图片地址\nlet image = new Image();\nimage.src = './logo.jpg'//就是一个普通的字符串\ndocument.body.appendChild(image);\n")])])]),e("h3",{attrs:{id:"在css引入background-url"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在css引入background-url"}},[a._v("#")]),a._v(" 在css引入background('url')")]),a._v(" "),e("p",[a._v("src/index.js里面")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("import './index.css'\n")])])]),e("p",[a._v("webpack.config.js里面")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v(" rules:[\n            {\n                test: /\\.(png|jpg|gif)$/,\n                use: 'file-loader'\n            },\n         ]\n")])])]),e("p",[a._v("src/index.css里面")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('div{\n    width: 952px;height: 249px;\n    background: url("./logo.jpg")\n}\n')])])]),e("h3",{attrs:{id:"img"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#img"}},[a._v("#")]),a._v(" img")]),a._v(" "),e("p",[a._v("src/index.html里面")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('<img src="./logo.jpg" alt="">\n')])])]),e("p",[a._v("src/webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("rules:[\n            {\n                test: /\\.(png|jpg|gif)$/,\n                //做一个限制，当我们的图片，小于多少k的生活，用base64来转化\n                //否则用file-loader产生真实图片\n                use: 'url-loader',\n                options:{\n                \tlimit: 200*1024\n                }\n            },\n       ]\n")])])]),e("p",[a._v("安装")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add url-loader -D\n")])])]),e("h2",{attrs:{id:"打包多页应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包多页应用"}},[a._v("#")]),a._v(" 打包多页应用")]),a._v(" "),e("h3",{attrs:{id:"新建一个文件webpack1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建一个文件webpack1"}},[a._v("#")]),a._v(" 新建一个文件webpack1")]),a._v(" "),e("h3",{attrs:{id:"初始化项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化项目"}},[a._v("#")]),a._v(" 初始化项目")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn init -y\n")])])]),e("h3",{attrs:{id:"安装插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装插件"}},[a._v("#")]),a._v(" 安装插件")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add webpack webpack-cli -D\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add html-webpack -D\n")])])]),e("h3",{attrs:{id:"编写代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编写代码"}},[a._v("#")]),a._v(" 编写代码")]),a._v(" "),e("p",[a._v("新建一个src文件夹，里面创建index.js和other.js和index.html")]),a._v(" "),e("p",[a._v("创建一个webpack.config.js文件")]),a._v(" "),e("p",[a._v("webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let path = require('path');\nlet HtmlWebpackPlugin = require('html-webpack-plugin');\nmodule.exports = {\n    //多入口\n    mode: 'development',\n    entry: {\n        home: './src/index.js',\n        other:'./src/other.js'\n    },\n    output:{\n        //[name]home,other\n        filename: '[name].js',\n        path: path.resolve('dist')\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './index.html',\n            filename: 'home.html',\n            //代码块\n            chunks:['home']\n        }),\n        new HtmlWebpackPlugin({\n            template: './index.html',\n            filename: 'other.html',\n            //代码块\n            chunks: ['other','home']\n        }),\n    ]\n}\n")])])]),e("p",[a._v("src/index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("console.log('home')\n")])])]),e("p",[a._v("src/other.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("console.log('other')\n")])])]),e("p",[a._v("然后npx webpack打包")]),a._v(" "),e("h2",{attrs:{id:"配置source-map"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置source-map"}},[a._v("#")]),a._v(" 配置source-map")]),a._v(" "),e("h3",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add @babel/core @babel/preset-env babel-cli babel-loader html-webpack-plugin webpack-dev-server -D\n")])])]),e("h3",{attrs:{id:"webpack-config-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js"}},[a._v("#")]),a._v(" webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("1，源码调试，会单独生成一个sourcemap文件 出错了 辉表示 当前报错的列和行  大和全\n\tdevtool: 'source-map',//添加映射文件，可以帮我们调试源代码\n2，不会参数单独的文件，但是可以显示行和列\n    devtool:'eval-source-map',\n3，不会参数列，但是是一个单独的映射文件\n    devtool: 'cheap-module-source-map',//产生后你可以保留起来\n4，不会产生文件，集成在打包后的文件中，不会参数列\n    devtool:'cheap-module-eval-source-map',\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let path = require('path');\nlet HtmlWebpackPlugin = require('html-webpack-plugin');\nmodule.exports = {\n    //多入口\n    mode: 'production',\n    entry: {\n        home: './src/index.js',\n    },\n    //配上一些规则\n    module:{\n        rules:[\n            {\n                test:/\\.js$/,\n                use:{\n                    loader:'babel-loader',\n                    options:{\n                        presets:['@babel/preset-env']\n                    }\n                }\n            }\n        ]\n    },\n    //1，源码调试，会单独生成一个sourcemap文件 出错了 辉表示 当前报错的列和行  大和全\n    // devtool: 'source-map',//添加映射文件，可以帮我们调试源代码\n    //2，不会参数单独的文件，但是可以显示行和列\n    // devtool:'eval-source-map',\n    //3，不会参数列，但是是一个单独的映射文件\n    // devtool: 'cheap-module-source-map',//产生后你可以保留起来\n    //4，不会产生文件，集成在打包后的文件中，不会参数列\n    devtool:'cheap-module-eval-source-map',\n    output:{\n        filename: '[name].js',\n        path: path.resolve('dist')\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './index.html',\n            filename: 'index.html',\n            //代码块\n            chunks:['home']\n        }),\n    ]\n}\n")])])]),e("h3",{attrs:{id:"index-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#index-js"}},[a._v("#")]),a._v(" index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("class Log{\n    constructor(){\n        comsole.log('出错了')\n    }\n}\nlet log = new Log()\n")])])]),e("h2",{attrs:{id:"watch用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#watch用法"}},[a._v("#")]),a._v(" watch用法")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("//监控当前的变化\n    watch: true,\n    watchOptions:{//监控的选项\n        poll:1000,//每秒 问我1000次\n        aggregateTimeout: 500,//防抖 我一直输入代码1233444\n        ignored: /node_modules/  //不需要进行监控哪个文件\n    },\n")])])]),e("h2",{attrs:{id:"webpack小插件应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack小插件应用"}},[a._v("#")]),a._v(" webpack小插件应用")]),a._v(" "),e("h3",{attrs:{id:"cleanwebpackplugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cleanwebpackplugin"}},[a._v("#")]),a._v(" cleanWebpackPlugin")]),a._v(" "),e("p",[a._v("清除webpack的插件")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add cleanWebpackPlugin -D\n")])])]),e("p",[a._v("用法：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let CleanWebpackPlugin = require('clean-webpack-plugin')\n\nnew CleanWebpackPlugin('./dist')\n")])])]),e("h3",{attrs:{id:"copywebpackplugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#copywebpackplugin"}},[a._v("#")]),a._v(" copyWebpackPlugin")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add copyWebpackPlugin -D\n")])])]),e("p",[a._v("用法")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let CopyWebpackPlugin = require('copy-webpack-plugin')\n\nnew CopyWebpackPlugin([{from:'./doc',to:'./dist'}])\n")])])]),e("h3",{attrs:{id:"bannerplugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bannerplugin"}},[a._v("#")]),a._v(" bannerPlugin")]),a._v(" "),e("p",[a._v("版权声明插件")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add bannerPlugin -D\n")])])]),e("p",[a._v("用法")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let webpack = require('webpack')\n\nnew webpack.BannerPlugin('make 2019 by jw')\n")])])]),e("h2",{attrs:{id:"webpack跨域问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack跨域问题"}},[a._v("#")]),a._v(" webpack跨域问题")]),a._v(" "),e("h3",{attrs:{id:"重写方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重写方式"}},[a._v("#")]),a._v(" 重写方式")]),a._v(" "),e("p",[a._v("通过重写的方式，把请求代理到express服务器上")]),a._v(" "),e("h4",{attrs:{id:"新起一个服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新起一个服务"}},[a._v("#")]),a._v(" 新起一个服务")]),a._v(" "),e("p",[a._v("在根目录下边创建一个server.js文件，可以在浏览器上边http://localhost:3000/api/user访问")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("//express\nlet express = require('express');\n\n\nlet app = express();\n\n\napp.get('/api/user',(req,res)=>{\n    res.json({name:'小明'})\n})\n\napp.listen(3000);\n")])])]),e("h4",{attrs:{id:"src-index-js-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-index-js-2"}},[a._v("#")]),a._v(" src/index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let xhr = new XMLHttpRequest();\n\n//http://localhost:8000 端口\nxhr.open('GET','/api/user',true);\n\nxhr.onload = function(){\n    console.log(xhr.response)\n}\n\nxhr.send();\n")])])]),e("h4",{attrs:{id:"webpack-config-js-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js-2"}},[a._v("#")]),a._v(" webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("   devServer:{\n        proxy:{//重写的方式，把请求代理到express服务器上\n            '/api':{\n                target:'http://localhost:3000',\n                pathRewrite:{'/api':''}\n        }//配置了一个代理\n    },\n")])])]),e("h3",{attrs:{id:"单纯模拟数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#单纯模拟数据"}},[a._v("#")]),a._v(" 单纯模拟数据")]),a._v(" "),e("h4",{attrs:{id:"webpack-config-js-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js-3"}},[a._v("#")]),a._v(" webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("devServer:{\n\tbefore(app){//提供的方法，钩子\n\t\tapp.get('/user',(req,res)=>{\n\t\t\tres.json({name:'小明'})\n\t\t})\n\t}\n}\n")])])]),e("h4",{attrs:{id:"src-index-js-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-index-js-3"}},[a._v("#")]),a._v(" src/index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let xhr = new XMLHttpRequest();\n\n//http://localhost:8000 端口\nxhr.open('GET','/user',true);\n\nxhr.onload = function(){\n    console.log(xhr.response)\n}\n\nxhr.send();\n")])])]),e("h3",{attrs:{id:"有服务端，不用代理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#有服务端，不用代理"}},[a._v("#")]),a._v(" 有服务端，不用代理")]),a._v(" "),e("p",[a._v("有服务端，不用代码来处理，能不能在服务端中启动webpack 端口用服务端端口")]),a._v(" "),e("h4",{attrs:{id:"server-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#server-js"}},[a._v("#")]),a._v(" server.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("//express\nlet express = require('express');\nlet app = express();\nlet webpack = require('webpack')\n\n//中间件\nlet middle = require('webpack-dev-middleware');\nlet config = require('./webpack.config.js')\nlet compiler = webpack(config)\n\napp.use(middle(compiler));\n\napp.get('/user',(req,res)=>{\n    res.json({name:'小明'})\n})\n\napp.listen(3000);\n")])])]),e("p",[a._v("安装        webpack开发服务的一个中间件")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add webpack-dev-middleware -D\n")])])]),e("h2",{attrs:{id:"resolve属性的配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resolve属性的配置"}},[a._v("#")]),a._v(" resolve属性的配置")]),a._v(" "),e("h3",{attrs:{id:"安装-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add css-loader style-loader -D\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add bootstrap  //这个是一个css框架\n")])])]),e("h3",{attrs:{id:"index-js-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#index-js-2"}},[a._v("#")]),a._v(" index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("// import 'bootstrap';\nimport './index.css'\nlet xhr = new XMLHttpRequest();\n\n//http://localhost:8000 端口\nxhr.open('GET','/api/user',true);\n\nxhr.onload = function(){\n    console.log(xhr.response)\n}\n\nxhr.send();\n")])])]),e("h3",{attrs:{id:"webpack-config-js-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js-4"}},[a._v("#")]),a._v(" webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("    rules:[\n            {\n                test:/\\.css$/,\n                use: ['style-loader','css-loader']\n            },\n          ]\n    \n    \n    resolve:{//解析 第三方包\n        modules:[path.resolve('node_modules')],\n        extensions:['.js','.css','.json','.vue'],\n        // mainFields:['style',main],\n        mainFiles:[],//入口文件的名字index.js\n        // alias:{//别名 vue vue.runtime\n        //     bootstrap:'bootstrap/dist/css/bootstrap.css'\n        // }\n    },\n")])])]),e("h2",{attrs:{id:"定义环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#定义环境变量"}},[a._v("#")]),a._v(" 定义环境变量")]),a._v(" "),e("h3",{attrs:{id:"webpack-config-js-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js-5"}},[a._v("#")]),a._v(" webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("    plugins: [\n        new HtmlWebpackPlugin.DefinePlugin({\n            DEV:JSON.stringify('production'),\n            FLAG: 'true',\n            EXPORESSION:JSON.stringify('1+1')\n        }),\n        ]\n")])])]),e("h3",{attrs:{id:"src-index-js-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-index-js-4"}},[a._v("#")]),a._v(" src/index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let url = '';\nif(DEV){\n    url = 'http://localhost:3000'\n}else{\n    url='https://shifengming.github.io/'\n}\nconsole.log(url,'----');\nconsole.log(typeof FLAG);\nconsole.log(EXPORESSION)\n")])])]),e("h2",{attrs:{id:"区别不同环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#区别不同环境"}},[a._v("#")]),a._v(" 区别不同环境")]),a._v(" "),e("h3",{attrs:{id:"安装-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-3"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add webpack-merga -D\n")])])]),e("h3",{attrs:{id:"新建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建"}},[a._v("#")]),a._v(" 新建")]),a._v(" "),e("ul",[e("li",[a._v("新建一个webpack.dev.js")]),a._v(" "),e("li",[a._v("新建一个webpack.prod.js")]),a._v(" "),e("li",[a._v("把webpack.config.js名称改为webpack.base.js")])]),a._v(" "),e("h3",{attrs:{id:"webpack-dev-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-dev-js"}},[a._v("#")]),a._v(" webpack.dev.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let {smart} = require('webpack-merge');\nlet base = require('./webpack.base.js');\n\nmodule.exports = smart(base,{\n    mode: 'development',\n    devServer:{\n        \n    },\n    devtool:'source-map'\n})\n")])])]),e("h3",{attrs:{id:"webpack-prod-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-prod-js"}},[a._v("#")]),a._v(" webpack.prod.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let {smart} = require('webpack-merge');\nlet base = require('./webpack.base.js');\n\nmodule.exports = smart(base,{\n    mode: 'production',\n    optimization:{\n        minimizer:[\n\n        ]\n    },\n    plugins:[\n        \n    ]\n})\n")])])]),e("h2",{attrs:{id:"noparse"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#noparse"}},[a._v("#")]),a._v(" noParse")]),a._v(" "),e("h3",{attrs:{id:"搭建环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搭建环境"}},[a._v("#")]),a._v(" 搭建环境")]),a._v(" "),e("ul",[e("li",[a._v("新建一个webpack3")]),a._v(" "),e("li",[a._v("yarn init -y初始化项目")]),a._v(" "),e("li",[a._v("项目新建webpack.config.js文件")]),a._v(" "),e("li",[a._v("新建public文件夹，里面建index.html文件")]),a._v(" "),e("li",[a._v("新建src文件夹，里面建index.js文件")])]),a._v(" "),e("h3",{attrs:{id:"安装配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装配置"}},[a._v("#")]),a._v(" 安装配置")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add webpack webpack-cli html-webpack-plugin @babel/core babel-loader @babel/preset-env @babel/preset-react -D\n")])])]),e("h3",{attrs:{id:"编写代码-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编写代码-2"}},[a._v("#")]),a._v(" 编写代码")]),a._v(" "),e("h4",{attrs:{id:"webpack-config-js-6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js-6"}},[a._v("#")]),a._v(" webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let path = require('path');\nlet HTMLWebpackPlugin = require('html-webpack-plugin')\nmodule.exports = {\n    mode: 'development',\n    entry: './src/index.js',\n    module:{\n        rules:[\n            {test:/\\.js$/,use:{\n                loader:'babel-loader',\n                options:{\n                    presets:[\n                        '@babel/preset-env',\n                        '@babel/preset-react'\n                    ]\n                }\n            }}\n        ]\n    },\n    output:{\n        filename:'bundle.js',\n        path: path.resolve(__dirname,'dist')\n    },\n    plugins:[\n        new HTMLWebpackPlugin({\n            template: './public/index.html'\n        })\n    ]\n}\n")])])]),e("h4",{attrs:{id:"执行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行"}},[a._v("#")]),a._v(" 执行")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("npx webpack\n")])])]),e("h3",{attrs:{id:"jquery"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jquery"}},[a._v("#")]),a._v(" jquery")]),a._v(" "),e("h4",{attrs:{id:"安装-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-4"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add jquery -D\n")])])]),e("h4",{attrs:{id:"src-index-js-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-index-js-5"}},[a._v("#")]),a._v(" src/index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("import jquery from 'jquery'\n")])])]),e("h4",{attrs:{id:"webpack-config-js-7"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js-7"}},[a._v("#")]),a._v(" webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("noParse:/jquery/,     //不去解析jquery包\n")])])]),e("h2",{attrs:{id:"lgnoreplugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lgnoreplugin"}},[a._v("#")]),a._v(" lgnorePlugin")]),a._v(" "),e("h3",{attrs:{id:"安装-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-5"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add moment -D\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add webpack-dev-server -D\n")])])]),e("h3",{attrs:{id:"src-index-js-6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-index-js-6"}},[a._v("#")]),a._v(" src/index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("import moment from 'moment'\n\n//设置语言\n\n//手动引入所需要的语言\nimport 'moment/locale/zh-cn';\nmoment.locale('zh-cn');\n\nlet r = moment().endOf('day').fromNow();\n\nconsole.log(r);\n")])])]),e("h3",{attrs:{id:"webpack-config-js-8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js-8"}},[a._v("#")]),a._v(" webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("    plugins:[\n        new webpack.IgnorePlugin(/\\.\\/locale/,/moment/),\n        new HTMLWebpackPlugin({\n            template: './public/index.html'\n        })\n    ]\n")])])]),e("h2",{attrs:{id:"dllplugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dllplugin"}},[a._v("#")]),a._v(" dllplugin")]),a._v(" "),e("p",[a._v("动态连接库")]),a._v(" "),e("h3",{attrs:{id:"安装-6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-6"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add react react-dom -D\n")])])]),e("h3",{attrs:{id:"webpack-config-js-9"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js-9"}},[a._v("#")]),a._v(" webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("  let webpack = require('webpack');\n  \n  devServer:{\n        port: 3000,\n        open: true,\n        contentBase:'./dist'\n    },\n   \n   options:{\n       presets:[\n           '@babel/preset-env',\n           '@babel/preset-react'\n       ]\n   }\n   \n   plugins:[\n        new webpack.DllReferencePlugin({\n            manifest: path.resolve(__dirname,'dist','manifest.json')\n        }),\n ]\n")])])]),e("h3",{attrs:{id:"index-js-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#index-js-3"}},[a._v("#")]),a._v(" index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("import React from 'react';\nimport {render} from 'react-dom'\n\nrender(<h1>jsx</h1>,window.root)\n")])])]),e("h3",{attrs:{id:"新建webpack-config-react-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建webpack-config-react-js"}},[a._v("#")]),a._v(" 新建webpack.config.react.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let path = require('path');\nlet webpack = require('webpack');\n\nmodule.exports = {\n    mode: 'development',\n    entry:{\n        react:['react','react-dom'],\n    },\n    output:{\n        filename:'_dll_[name].js',//产生的文件名\n        path: path.resolve(__dirname,'dist'),\n        library:'_dll_[name]',//_dll_react\n        libraryTarget: 'var' //commonjs var this ...\n    },\n    plugins:[\n        new webpack.DllPlugin({//name == library\n            name:'_dll_[name]',\n            path: path.resolve(_dirname,'dist','manifest.json')\n        })\n    ]\n}\n")])])]),e("h2",{attrs:{id:"happypack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#happypack"}},[a._v("#")]),a._v(" happypack")]),a._v(" "),e("p",[a._v("webpack通过happypack实现多线程打包")]),a._v(" "),e("h3",{attrs:{id:"安装-7"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-7"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add happypack\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add style-loader css-loader -D\n")])])]),e("h3",{attrs:{id:"webpack-config-js-10"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js-10"}},[a._v("#")]),a._v(" webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let Happypack = require('happypack');\n\nrules:[\n \tuse: {\n\t\t loader: 'babel-loader',\n \t\t options:{\n            presets:[\n             '@babel/preset-env',\n             '@babel/preset-react'\n\t\t ]\n \t\t}\n\t}\n]\n\nplugins:[\n        new Happypack({\n            id:'js',\n            use:[\n                \n            ]\n        }),\n ]\n")])])]),e("h2",{attrs:{id:"webpack自带优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack自带优化"}},[a._v("#")]),a._v(" webpack自带优化")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("import 在生产环境下 会自动去除掉没用的代码")])]),a._v(" "),e("li",[e("p",[a._v("tree-shaking 把没用的代码 自动删除掉")])]),a._v(" "),e("li",[e("p",[a._v("es6模块会把结果放在defalut上")])]),a._v(" "),e("li",[e("p",[a._v("scope hosting作用域提升")])])]),a._v(" "),e("h2",{attrs:{id:"抽离公共代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#抽离公共代码"}},[a._v("#")]),a._v(" 抽离公共代码")]),a._v(" "),e("p",[a._v("在多个页面中抽取页面的代码")]),a._v(" "),e("p",[a._v("src里面新建a.js   b.js   c.js   other.js")]),a._v(" "),e("h3",{attrs:{id:"webpack-config-js-11"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js-11"}},[a._v("#")]),a._v(" webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("module.exports = {\n    //优化\n    optimization:{\n        splitChunks:{\n            //分离代码块\n            cacheGroups:{\n                //缓存组\n                common:{\n                    //公共的模块\n                    chunks: 'initial',\n                    minSize:0,\n                    minChunks:2,\n                },\n                vendor:{\n                    priority:1,\n                    test:/node_modules/,//把你抽离出来\n                    chunks: 'initial',\n                    minSize: 0,\n                    minChunks: 2,\n                }\n            }\n        }\n    },\n}\n")])])]),e("h3",{attrs:{id:"other-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#other-js"}},[a._v("#")]),a._v(" other.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("import './a'\nimport './b'\nconsole.log('other.js');\n\nimport $ from 'jquery'\nconsole.log($);\n")])])]),e("h3",{attrs:{id:"a-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#a-js"}},[a._v("#")]),a._v(" a.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("console.log('a~~~');\n")])])]),e("h3",{attrs:{id:"b-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#b-js"}},[a._v("#")]),a._v(" b.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("console.log('b~~~');\n")])])]),e("h3",{attrs:{id:"c-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#c-js"}},[a._v("#")]),a._v(" c.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("import $ from 'jquery'\n\nconsole.log($);\n")])])]),e("h3",{attrs:{id:"index-js-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#index-js-4"}},[a._v("#")]),a._v(" index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("import './a'\nimport './b'\nconsole.log('other.js');\n\nimport $ from 'jquery'\nconsole.log($);\n")])])]),e("h2",{attrs:{id:"懒加载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#懒加载"}},[a._v("#")]),a._v(" 懒加载")]),a._v(" "),e("p",[a._v("安装插件")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add @babel/plugin-syntax-dynamic-import -D\n")])])]),e("p",[a._v("再webpack.config.js里面引入一下")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("plugins:[\n\t'@babel/plugin-syntax-dynamic-import'\n]\n")])])]),e("h3",{attrs:{id:"src-index-js-7"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-index-js-7"}},[a._v("#")]),a._v(" src/index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let button = document.createElement('button');\nbutton.innerHTML = 'good'\n// vue懒加载 react懒加载\nbutton.addEventListener('click',function(){\n    //es6菜案中的语法,jsonp实现动态加载文件\n    import('./source.js').then(data => {\n        console.log(data)\n    })\n});\n\ndocument.body.appendChild('button');\n")])])]),e("h3",{attrs:{id:"src-source-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-source-js"}},[a._v("#")]),a._v(" src/source.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("export default 'sxm'\n")])])]),e("h2",{attrs:{id:"热更新"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#热更新"}},[a._v("#")]),a._v(" 热更新")]),a._v(" "),e("p",[a._v("以前每次页面更新都要重新更新，热更新是只更新某个部分")]),a._v(" "),e("h3",{attrs:{id:"webpack-config-js-12"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js-12"}},[a._v("#")]),a._v(" webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("devServer:{\n\thot: true,\n}\n\nplugins:[\n\t//热更新插件\n  new webpack.NamedModulesPlugin(),//打印更新的模块路径\n  new webpack.HotModuleReplacementPlugin() //热更新插件\n]\n")])])]),e("h3",{attrs:{id:"src-index-js-8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-index-js-8"}},[a._v("#")]),a._v(" src/index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("import str from './source'\nconsole.log(str);\nif(module.hot){\n    module.hot.accept('./source',()=>{\n        let str = require('./source')\n        console.log(str);\n    })\n}\n")])])]),e("h3",{attrs:{id:"src-source-js-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-source-js-2"}},[a._v("#")]),a._v(" src/source.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("export default 'sxm1'\n")])])]),e("h2",{attrs:{id:"tapable介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tapable介绍"}},[a._v("#")]),a._v(" tapable介绍")]),a._v(" "),e("h3",{attrs:{id:"概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[a._v("#")]),a._v(" 概念")]),a._v(" "),e("p",[a._v("webpack本质上是一种事件流的机制，它的工作流程就是将各个插件串联起来，而实现这一切的核心就是Tapable，Tapable有点类似于nodejs的events库，核心原理也是依赖于发布订阅模式")]),a._v(" "),e("h3",{attrs:{id:"安装-8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-8"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add tapable\n")])])]),e("h3",{attrs:{id:"同步钩子代码编写"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#同步钩子代码编写"}},[a._v("#")]),a._v(" 同步钩子代码编写")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("class SyncHook{//钩子是同步的\n    constructor(args){ //args => ['name']\n        this.tasks = [];\n    }\n    tap(name,task){\n        this.tasks.push(task);\n    }\n    call(...args){\n        this.tasks.forEach((task) => task(...args));\n    }\n}\nlet hook = new SyncHook(['name']);\nhook.tap('react',function(name){\n    console.log('react',name)\n})\nhook.tap('node',function(name){\n    console.log('node',name)\n})\nhook.call('xm')\n")])])]),e("h3",{attrs:{id:"同步钩子对应的源码实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#同步钩子对应的源码实现"}},[a._v("#")]),a._v(" 同步钩子对应的源码实现")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let {SyncHook} = require('tapable');\n\nclass Lesson {\n    constructor(){\n        this.hooks = {\n            arch: new SyncHook(['name']),\n        }\n    }\n    tap(){\n        //注册监听函数\n        this.hooks.arch.tap('node',function(name){\n            console.log('node',name)\n        });\n        this.hooks.arch.tap('react',function(name){\n            console.log('react',name)\n        });\n    }\n    start(){\n        //触发事件执行\n        this.hooks.arch.call('xm');\n\n    }\n}\nlet l = new Lesson();\nl.tap();//注册了这两个事件\nl.start();//启动钩子\n")])])]),e("h2",{attrs:{id:"tapable"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tapable"}},[a._v("#")]),a._v(" tapable")]),a._v(" "),e("h3",{attrs:{id:"钩子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#钩子"}},[a._v("#")]),a._v(" 钩子")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("Tapable里面包含Sync*和Async*\n\n同步Sync*里面包含SyncHook、SyncBailHook、SyncWaterfallHook、SyncLoopHook\n\n异步Async*里面包含AsyncParallel*和AsyncSeries*\n\nAsyncParallel*里面包含AsyncParallelHook和AsyncParallelBailHook\n\nAsyncSeries*里面包含AsyncSeriesHook、AsyncSeriesBailHook、AsyncSeriesWaterfallHook\n")])])]),e("h3",{attrs:{id:"syncbailhook"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#syncbailhook"}},[a._v("#")]),a._v(" SyncBailHook")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("class SyncBailHook {//钩子是同步的\n    constructor(args){\n        this.tasks = [];\n    }\n    tap(name,task){\n        this.tasks.push(task);\n    }\n    call(...args){\n        let ret;//当前这个函数的返回值\n        let index = 0;//当前要先执行第一个\n        do{\n            ret = this.tasks[index++](...args)\n        }while(ret === undefined && index < this.tasks.length);\n    }\n}\nlet hook = new SyncBailHook(['name']);\nhook.tap('react',function(name){\n    console.log('react',name);\n    //return '停止向下执行'\n});\nhook.tap('node',function(name){\n    console.log('node',name);\n    //return '停止向下执行'\n});\nhook.call('xm')\n")])])]),e("h3",{attrs:{id:"syncloophook"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#syncloophook"}},[a._v("#")]),a._v(" SyncLoopHook")]),a._v(" "),e("p",[a._v("同步遇到某个不返回undefined的监听函数会多次执行")]),a._v(" "),e("h3",{attrs:{id:"asyncparrellehook"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#asyncparrellehook"}},[a._v("#")]),a._v(" AsyncParrelleHook")]),a._v(" "),e("p",[a._v("异步的钩子串行，并需要等待所有并发的异步事件执行后在执行回调方法")]),a._v(" "),e("h3",{attrs:{id:"asyncserieshook"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#asyncserieshook"}},[a._v("#")]),a._v(" AsyncSeriesHook")]),a._v(" "),e("p",[a._v("异步")]),a._v(" "),e("h3",{attrs:{id:"asyncserieswaterfall"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#asyncserieswaterfall"}},[a._v("#")]),a._v(" AsyncSeriesWaterfall")]),a._v(" "),e("h2",{attrs:{id:"手写webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#手写webpack"}},[a._v("#")]),a._v(" 手写webpack")]),a._v(" "),e("h3",{attrs:{id:"webpack打包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack打包"}},[a._v("#")]),a._v(" webpack打包")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn init -y\nyarn add webpack webpack-cli -D\n")])])]),e("h3",{attrs:{id:"新建一个项目webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建一个项目webpack"}},[a._v("#")]),a._v(" 新建一个项目webpack")]),a._v(" "),e("p",[a._v("里面建一个文件webpack.config.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let path = require('path');\n\nmodule.exports = {\n    mode:'development',\n    entry: './src/index.js',\n    output:{\n        filename:'bundle.js',\n        path: path.resolve(__dirname,'dist')\n    }\n}\n")])])]),e("p",[a._v("src/index.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let str = require('./a.js');\nconsole.log(str);\n")])])]),e("p",[a._v("src/a.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let b = require('./base/b.js')\nmodule.exports = 'a'+b;\n")])])]),e("p",[a._v("src/base/b.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("module.exports = 'b'\n")])])]),e("h3",{attrs:{id:"新建一个项目webpack2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建一个项目webpack2"}},[a._v("#")]),a._v(" 新建一个项目webpack2")]),a._v(" "),e("p",[a._v("yarn init -y初始化项目后")]),a._v(" "),e("p",[a._v("package.json里面添加")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('"bin":{\n\t"xm-pack":"./bin-xm-pack.js"\n}\n')])])]),e("p",[a._v("新建一个bin/xm-pack.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("//当前这个代码需要使用node环境来执行\n#! /usr/bin/env node\nconsole.log('start');\n")])])]),e("h3",{attrs:{id:"npm-link"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm-link"}},[a._v("#")]),a._v(" npm link")]),a._v(" "),e("p",[a._v("想把webpack2里面的xm-pack.js运用到全局上")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("npm link\nnpm link xm-pack\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("npx xm-pack  就可以更改webpack里面的打包文件dist内容\n")])])]),e("h2",{attrs:{id:"webpack分析与处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack分析与处理"}},[a._v("#")]),a._v(" webpack分析与处理")]),a._v(" "),e("p",[a._v("需要找到当前执行名的路径，拿到webpack.config.js")]),a._v(" "),e("h3",{attrs:{id:"bin-xm-pack-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bin-xm-pack-js"}},[a._v("#")]),a._v(" bin/xm-pack.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("#! /usr/bin/env node\n\nconsole.log('start11')\n\n//需要拿到当前执行名的路径，拿到webpack.config.js\nlet path = require('path');\n\n//config配置文件\nlet config = require(path.resolve(__dirname));\n\nlet Compiler = require('../lib/Compiler.js')\nlet Compiler = new Compiler();\n//标识运行编译\ncompiler.run();\n")])])]),e("h3",{attrs:{id:"lib-compiler-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lib-compiler-js"}},[a._v("#")]),a._v(" lib/Compiler.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("class Compiler{\n    constructor(config){\n        //entr output\n        this.config = config;\n        //需要保存入口文件的路径\n        this.entryId; //'./src/index.js'\n        //需要保存所有的模块依赖\n        this.modules = {};\n        this.entry = config.entry;//入口路径\n        //工作路径\n        this.root = process.cwd();\n    }\n    buildModule(modulePath,isEntry){\n\n    }\n    emitFile(){\n\n    }\n    run(){\n        //执行  并且创建模块的依赖关系\n        this.buildModule(path.resolve(this.root,this.entry),true);\n        //打包后的文件\n        this.emitFile();\n    }\n}\nmodule.exports = Compiler\n")])])]),e("h2",{attrs:{id:"创建依赖关系"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建依赖关系"}},[a._v("#")]),a._v(" 创建依赖关系")]),a._v(" "),e("h3",{attrs:{id:"bin-xm-pack-js-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bin-xm-pack-js-2"}},[a._v("#")]),a._v(" bin/xm-pack.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("#! /usr/bin/env node\n\nconsole.log('start11')\n\n//需要拿到当前执行名的路径，拿到webpack.config.js\nlet path = require('path');\n\n//config配置文件\nlet config = require(path.resolve('webpack.config.js'));\n\nlet Compiler = require('../lib/Compiler.js')\nlet Compiler = new Compiler();\n//标识运行编译\ncompiler.run();\n")])])]),e("h3",{attrs:{id:"lib-compiler-js-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lib-compiler-js-2"}},[a._v("#")]),a._v(" lib/Compiler.js")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let fs = require('fs');\nlet \nclass Compiler{\n    constructor(config){\n        //entr output\n        this.config = config;\n        //需要保存入口文件的路径\n        this.entryId; //'./src/index.js'\n        //需要保存所有的模块依赖\n        this.modules = {};\n        this.entry = config.entry;//入口路径\n        //工作路径\n        this.root = process.cwd();\n    }\n    //获取源码\n    getSource(modulePath){\n        let content = fs.readFileSync(modulePath,'utf8')\n        return content\n    }\n    //解析源码\n    parse(source,parentPath){//AST解析语法树\n        console.log(source,parentPath)\n    }\n    //构建模块\n    buildModule(modulePath,isEntry){\n        //拿到模块的内容\n        let source = this.getSource(modulePath)\n        //拿到模块id modulePath = modulePath - this.root src/index.js\n        let moduleName = './'+path.relative(this.root,modulePath);\n        if(isEntry){\n            this.entryId = moduleName;//保存入口的名字\n        }\n        //解析需要把source源码进行改造，返回一个依赖列表\n        let {sourceCode, dependencies} = this.parse(source,path.dirname(moduleName));// ./src\n        //把相对路径和模块中的内容 对应起来\n        this.modules[moduleName] = sourceCode;\n        console.log(source,moduleName)\n\n    }\n    emitFile(){//发射文件\n\n    }\n    run(){\n        //执行  并且创建模块的依赖关系\n        this.buildModule(path.resolve(this.root,this.entry),true);\n        //打包后的文件\n        this.emitFile();\n    }\n}\nmodule.exports = Compiler\n")])])]),e("h2",{attrs:{id:"ast递归解析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ast递归解析"}},[a._v("#")]),a._v(" AST递归解析")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add babylon @babel/traverse @babel/types @babel/generator -D\n")])])]),e("h2",{attrs:{id:"生成打包结果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成打包结果"}},[a._v("#")]),a._v(" 生成打包结果")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add ejs\n")])])]),e("h2",{attrs:{id:"增加loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#增加loader"}},[a._v("#")]),a._v(" 增加loader")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add tabpable\n")])])]),e("h2",{attrs:{id:"loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#loader"}},[a._v("#")]),a._v(" loader")]),a._v(" "),e("h3",{attrs:{id:"概念-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概念-2"}},[a._v("#")]),a._v(" 概念")]),a._v(" "),e("p",[a._v("webpack只能处理javascript的模块，如果要处理其他类型的文件，需要使用loader进行转换，loader是webpack中一个重要的概念，它是指用来将一段代码转换成另一段代码的webpack加载器")]),a._v(" "),e("h3",{attrs:{id:"配置loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置loader"}},[a._v("#")]),a._v(" 配置loader")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let path = require('path');\nmodule.exports = {\n\tmode: 'development',\n\tentry:\"./src/index.js\",\n\toutput:{\n\t\tfilename: 'buildle.js',\n\t\tpath: path.resolve(_dirname,'dist')\n\t},\n\tmodule:{\n\t\trules:[\n\t\t\t{\n\t\t\t\ttest:/\\.js$/,\n\t\t\t\tuse:'loader1'\n\t\t\t}\n\t\t]\n\t}\n}\n")])])]),e("h3",{attrs:{id:"写一个简单的loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#写一个简单的loader"}},[a._v("#")]),a._v(" 写一个简单的loader")]),a._v(" "),e("p",[a._v("在根目录下创建loaders文件夹，增加loader1,loader就是一个函数参数是匹配到文件的内容，返回结果会作为最新的内容")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("function loader(source){\n\treturn 'hello';\n}\nmodule.exports = loader\n")])])]),e("h3",{attrs:{id:"配置多个loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置多个loader"}},[a._v("#")]),a._v(" 配置多个loader")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("module:{\n\trules:[\n\t\t{test:/\\.js$/,use:'loader1'},\n\t\t{test:/\\.js$/,use:'loader2'},\n\t\t{test:/\\.js$/,use:'loader3'}\n\t]\n}\n")])])]),e("p",[a._v("默认执行顺序，从下到上，从右向左")]),a._v(" "),e("h3",{attrs:{id:"loader的分类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#loader的分类"}},[a._v("#")]),a._v(" loader的分类")]),a._v(" "),e("p",[a._v("前置loader pre")]),a._v(" "),e("p",[a._v("普通loader normal")]),a._v(" "),e("p",[a._v("后置loader post")]),a._v(" "),e("p",[a._v("inlineloader")]),a._v(" "),e("p",[a._v("执行属性是：pre+normal+inline+post")]),a._v(" "),e("h3",{attrs:{id:"符号的含义"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#符号的含义"}},[a._v("#")]),a._v(" 符号的含义")]),a._v(" "),e("p",[a._v("-! 禁用前置和正常loader")]),a._v(" "),e("p",[a._v("! 禁用普通loader")]),a._v(" "),e("p",[a._v("!! 禁用前置和后置和正常loader")]),a._v(" "),e("h3",{attrs:{id:"pitchloader和normlloader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pitchloader和normlloader"}},[a._v("#")]),a._v(" pitchLoader和normlLoader")]),a._v(" "),e("p",[a._v("每个loader都有两部分组成pitchLoader和normalLoader,pitch和normal的执行顺序正好相反，当pitch没用定义或者没用返回值时，先会依次执行pitch在获取资源执行loader，如果定义的某个pitch有返回值会跳过读取资源和自己的loader")]),a._v(" "),e("h3",{attrs:{id:"loader的特点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#loader的特点"}},[a._v("#")]),a._v(" loader的特点")]),a._v(" "),e("p",[a._v("第一个loader要返回js脚本")]),a._v(" "),e("p",[a._v("每个loader只做一件内容，为了使loader在更多场景链式调用")]),a._v(" "),e("p",[a._v("每一个loader都是一个模块")]),a._v(" "),e("p",[a._v("每个loader都是无状态的，确保loader在不同模块之间不保存状态")]),a._v(" "),e("h2",{attrs:{id:"babel-loader实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#babel-loader实现"}},[a._v("#")]),a._v(" babel-loader实现")]),a._v(" "),e("h3",{attrs:{id:"安装插件-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装插件-2"}},[a._v("#")]),a._v(" 安装插件")]),a._v(" "),e("p",[a._v("安装babel和babel相关插件")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add @babel/core babel-loader @babel/preset-env\n")])])]),e("h2",{attrs:{id:"实现file-loader和url-loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实现file-loader和url-loader"}},[a._v("#")]),a._v(" 实现file-loader和url-loader")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add mime\n")])])]),e("h2",{attrs:{id:"less-loader和css-loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#less-loader和css-loader"}},[a._v("#")]),a._v(" less-loader和css-loader")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yarn add less\n")])])])])}],!1,null,null,null);e.default=r.exports}}]);