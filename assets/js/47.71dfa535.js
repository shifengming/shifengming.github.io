(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{227:function(t,a,e){"use strict";e.r(a);var r=e(0),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"react生命周期"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react生命周期"}},[t._v("#")]),t._v(" React生命周期")]),t._v(" "),e("h2",{attrs:{id:"生命周期函数概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生命周期函数概念"}},[t._v("#")]),t._v(" 生命周期函数概念")]),t._v(" "),e("p",[t._v("React主要就是通过构建可复用组件来构建用户界面，通过状态渲染对应界面，每个组件都有自己的生命周期，它规定了组件的状态和方法需要在哪个阶段改变和执行")]),t._v(" "),e("p",[t._v("生命周期的钩子函数通俗的说就是在某一个时刻会被自动调用执行的函数")]),t._v(" "),e("h2",{attrs:{id:"生命周期的三个阶段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生命周期的三个阶段"}},[t._v("#")]),t._v(" 生命周期的三个阶段")]),t._v(" "),e("ul",[e("li",[t._v("Mounting：已插入真实DOM（加载阶段）")]),t._v(" "),e("li",[t._v("Updating：正在被重新渲染（更新阶段）")]),t._v(" "),e("li",[t._v("Unmounting：已移出真实DOM（卸载阶段）")])]),t._v(" "),e("h2",{attrs:{id:"react生命周期分类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react生命周期分类"}},[t._v("#")]),t._v(" React生命周期分类")]),t._v(" "),e("h3",{attrs:{id:"mount"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mount"}},[t._v("#")]),t._v(" Mount")]),t._v(" "),e("ul",[e("li",[t._v("constructor()")]),t._v(" "),e("li",[t._v("render()")]),t._v(" "),e("li",[t._v("componentDidMount()")])]),t._v(" "),e("h3",{attrs:{id:"update"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#update"}},[t._v("#")]),t._v(" Update")]),t._v(" "),e("ul",[e("li",[t._v("getDerivedStateFromProps()")]),t._v(" "),e("li",[t._v("shouldComponentUpdate()")]),t._v(" "),e("li",[t._v("getSnapshotBeforeUpdate()")]),t._v(" "),e("li",[t._v("render()")]),t._v(" "),e("li",[t._v("componentDidUpdate()")])]),t._v(" "),e("h3",{attrs:{id:"unmount"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#unmount"}},[t._v("#")]),t._v(" Unmount")]),t._v(" "),e("ul",[e("li",[t._v("componentWillUnmount()")])]),t._v(" "),e("h2",{attrs:{id:"生命周期图解"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生命周期图解"}},[t._v("#")]),t._v(" 生命周期图解")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/2/3/1700ba2061c447d7?w=1280&h=687&f=png&s=71913",alt:"cmd-markdown-logo"}})]),t._v(" "),e("h2",{attrs:{id:"生命周期执行次数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生命周期执行次数"}},[t._v("#")]),t._v(" 生命周期执行次数")]),t._v(" "),e("blockquote",[e("p",[t._v("通过上边这张图，我们很容易得到下边的结论")])]),t._v(" "),e("h3",{attrs:{id:"mount-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mount-2"}},[t._v("#")]),t._v(" Mount")]),t._v(" "),e("h4",{attrs:{id:"constructor"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#constructor"}},[t._v("#")]),t._v(" constructor()")]),t._v(" "),e("blockquote",[e("p",[t._v("只执行一次")])]),t._v(" "),e("h4",{attrs:{id:"render"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#render"}},[t._v("#")]),t._v(" render()")]),t._v(" "),e("blockquote",[e("p",[t._v("执行多次")])]),t._v(" "),e("h4",{attrs:{id:"componentdidmount"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#componentdidmount"}},[t._v("#")]),t._v(" componentDidMount()")]),t._v(" "),e("blockquote",[e("p",[t._v("只执行一次")])]),t._v(" "),e("h3",{attrs:{id:"update-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#update-2"}},[t._v("#")]),t._v(" Update")]),t._v(" "),e("h4",{attrs:{id:"getderivedstatefromprops"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getderivedstatefromprops"}},[t._v("#")]),t._v(" getDerivedStateFromProps()")]),t._v(" "),e("blockquote",[e("p",[t._v("执行多次")])]),t._v(" "),e("h4",{attrs:{id:"shouldcomponentupdate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shouldcomponentupdate"}},[t._v("#")]),t._v(" shouldComponentUpdate()")]),t._v(" "),e("blockquote",[e("p",[t._v("执行多次")])]),t._v(" "),e("h4",{attrs:{id:"getsnapshotbeforeupdate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getsnapshotbeforeupdate"}},[t._v("#")]),t._v(" getSnapshotBeforeUpdate()")]),t._v(" "),e("blockquote",[e("p",[t._v("执行多次")])]),t._v(" "),e("h4",{attrs:{id:"render-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#render-2"}},[t._v("#")]),t._v(" render()")]),t._v(" "),e("blockquote",[e("p",[t._v("执行多次")])]),t._v(" "),e("h4",{attrs:{id:"componentdidupdate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#componentdidupdate"}},[t._v("#")]),t._v(" componentDidUpdate()")]),t._v(" "),e("blockquote",[e("p",[t._v("执行多次")])]),t._v(" "),e("h3",{attrs:{id:"unmount-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#unmount-2"}},[t._v("#")]),t._v(" unmount")]),t._v(" "),e("h4",{attrs:{id:"componentwillunmount"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#componentwillunmount"}},[t._v("#")]),t._v(" componentWillUnmount()")]),t._v(" "),e("blockquote",[e("p",[t._v("有条件的执行")])]),t._v(" "),e("h2",{attrs:{id:"mount加载过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mount加载过程"}},[t._v("#")]),t._v(" Mount加载过程")]),t._v(" "),e("h3",{attrs:{id:"constructor-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#constructor-2"}},[t._v("#")]),t._v(" constructor")]),t._v(" "),e("h4",{attrs:{id:"解释分析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解释分析"}},[t._v("#")]),t._v(" 解释分析")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("constructor()\n")])])]),e("p",[t._v("加载的时候调用一次，可以初始化state,接受两个参数：props和context")]),t._v(" "),e("h4",{attrs:{id:"使用例子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用例子"}},[t._v("#")]),t._v(" 使用例子")]),t._v(" "),e("p",[t._v("设置初始化状态以及绑定类方法")]),t._v(" "),e("h3",{attrs:{id:"render-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#render-3"}},[t._v("#")]),t._v(" render")]),t._v(" "),e("h4",{attrs:{id:"解释分析-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解释分析-2"}},[t._v("#")]),t._v(" 解释分析")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("render()\n")])])]),e("p",[t._v("挂载渲染组件")]),t._v(" "),e("h4",{attrs:{id:"使用例子-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用例子-2"}},[t._v("#")]),t._v(" 使用例子")]),t._v(" "),e("p",[t._v("它把属性和状态作为输入并且返回(需要渲染的)元素")]),t._v(" "),e("h3",{attrs:{id:"componentdidmount-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#componentdidmount-2"}},[t._v("#")]),t._v(" componentDidMount()")]),t._v(" "),e("h4",{attrs:{id:"解释分析-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解释分析-3"}},[t._v("#")]),t._v(" 解释分析")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("componentDidMount()\n")])])]),e("p",[t._v("组件第一次渲染已完成，此时Dom节点已经生成，可在这调用ajax请求，返回数据setState后组件会重新渲染")]),t._v(" "),e("h4",{attrs:{id:"使用例子-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用例子-3"}},[t._v("#")]),t._v(" 使用例子")]),t._v(" "),e("p",[t._v("发起异步请求去API获取数据的好时期")]),t._v(" "),e("h2",{attrs:{id:"update更新过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#update更新过程"}},[t._v("#")]),t._v(" Update更新过程")]),t._v(" "),e("h3",{attrs:{id:"getderivedstatefromprops-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getderivedstatefromprops-2"}},[t._v("#")]),t._v(" getDerivedStateFromProps")]),t._v(" "),e("h4",{attrs:{id:"解释分析-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解释分析-4"}},[t._v("#")]),t._v(" 解释分析")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("getDerivedStateFromProps(nextProps, prevState)\n")])])]),e("p",[t._v("根据当前的props来更新组件的state,每个render都会调用此方法")]),t._v(" "),e("h4",{attrs:{id:"使用例子-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用例子-4"}},[t._v("#")]),t._v(" 使用例子")]),t._v(" "),e("p",[t._v("触发一些回调，如动画或页面跳转等")]),t._v(" "),e("h3",{attrs:{id:"shouldcomponentupdate-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shouldcomponentupdate-2"}},[t._v("#")]),t._v(" shouldComponentUpdate")]),t._v(" "),e("h4",{attrs:{id:"解释分析-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解释分析-5"}},[t._v("#")]),t._v(" 解释分析")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("shouldComponentUpdate(nextProps, nextState)\n")])])]),e("p",[t._v("组件接收新的props或state时调用，return true 就会更新dom， return false就能阻止更新，主要用于性能优化(部分更新)")]),t._v(" "),e("h4",{attrs:{id:"使用例子-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用例子-5"}},[t._v("#")]),t._v(" 使用例子")]),t._v(" "),e("p",[t._v("性能优化(部分更新)")]),t._v(" "),e("h3",{attrs:{id:"getsnapshotbeforeupdate-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getsnapshotbeforeupdate-2"}},[t._v("#")]),t._v(" getSnapshotBeforeUpdate")]),t._v(" "),e("h4",{attrs:{id:"解释分析-6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解释分析-6"}},[t._v("#")]),t._v(" 解释分析")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("getSnapshotBeforeUpdate(prevProps, prevState)\n")])])]),e("p",[t._v("在元素被渲染并写入DOM之前调用，使得组件能在发生更改之前从 DOM 中捕获一些信息，此生命周期的任何返回值将作为参数传递给\ncomponentDidUpdate()")]),t._v(" "),e("h4",{attrs:{id:"使用例子-6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用例子-6"}},[t._v("#")]),t._v(" 使用例子")]),t._v(" "),e("p",[t._v("想获得聊天窗口中的滚动位置，可以通过这个方法获取信息")]),t._v(" "),e("h3",{attrs:{id:"render-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#render-4"}},[t._v("#")]),t._v(" render")]),t._v(" "),e("h4",{attrs:{id:"解释分析-7"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解释分析-7"}},[t._v("#")]),t._v(" 解释分析")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("render()\n")])])]),e("p",[t._v("重新挂载(渲染)组件")]),t._v(" "),e("h4",{attrs:{id:"使用例子-7"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用例子-7"}},[t._v("#")]),t._v(" 使用例子")]),t._v(" "),e("p",[t._v("创建虚拟dom,进行diff算法，更新dom树都在此进行")]),t._v(" "),e("h3",{attrs:{id:"componentdidupdate-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#componentdidupdate-2"}},[t._v("#")]),t._v(" componentDidUpdate")]),t._v(" "),e("h4",{attrs:{id:"解释分析-8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解释分析-8"}},[t._v("#")]),t._v(" 解释分析")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("componentDidUpdate(prevProps,prevState)\n")])])]),e("p",[t._v("会在更新(dom已经更新)后会被立即调用，首次渲染不会执行此方法")]),t._v(" "),e("h4",{attrs:{id:"使用例子-8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用例子-8"}},[t._v("#")]),t._v(" 使用例子")]),t._v(" "),e("p",[t._v("可以在这里获取dom")]),t._v(" "),e("h2",{attrs:{id:"unmount卸载过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#unmount卸载过程"}},[t._v("#")]),t._v(" Unmount卸载过程")]),t._v(" "),e("h3",{attrs:{id:"componentwillunmount-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#componentwillunmount-2"}},[t._v("#")]),t._v(" componentWillUnmount")]),t._v(" "),e("h4",{attrs:{id:"解释分析-9"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解释分析-9"}},[t._v("#")]),t._v(" 解释分析")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("componentWillUnmount ()\n")])])]),e("p",[t._v("当组件要被从界面上移除的时候，就会调用。在这个函数中，可以做一些组件相关的清理工作")]),t._v(" "),e("h4",{attrs:{id:"使用例子-9"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用例子-9"}},[t._v("#")]),t._v(" 使用例子")]),t._v(" "),e("p",[t._v("取消计时器、网络请求等")]),t._v(" "),e("h2",{attrs:{id:"是否使用setstate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#是否使用setstate"}},[t._v("#")]),t._v(" 是否使用setState()")]),t._v(" "),e("h3",{attrs:{id:"componentdidmount-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#componentdidmount-3"}},[t._v("#")]),t._v(" componentDidMount()")]),t._v(" "),e("blockquote",[e("p",[t._v("使用")])]),t._v(" "),e("h3",{attrs:{id:"getderivedstatefromprops-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getderivedstatefromprops-3"}},[t._v("#")]),t._v(" getDerivedStateFromProps()")]),t._v(" "),e("blockquote",[e("p",[t._v("使用")])]),t._v(" "),e("h3",{attrs:{id:"shouldcomponentupdate-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shouldcomponentupdate-3"}},[t._v("#")]),t._v(" shouldComponentUpdate()")]),t._v(" "),e("blockquote",[e("p",[t._v("不使用")])]),t._v(" "),e("h3",{attrs:{id:"getsnapshotbeforeupdate-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getsnapshotbeforeupdate-3"}},[t._v("#")]),t._v(" getSnapshotBeforeUpdate()")]),t._v(" "),e("blockquote",[e("p",[t._v("不使用")])]),t._v(" "),e("h3",{attrs:{id:"componentdidupdate-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#componentdidupdate-3"}},[t._v("#")]),t._v(" componentDidUpdate()")]),t._v(" "),e("blockquote",[e("p",[t._v("使用")])]),t._v(" "),e("h3",{attrs:{id:"componentwillunmount-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#componentwillunmount-3"}},[t._v("#")]),t._v(" componentWillUnmount()")]),t._v(" "),e("blockquote",[e("p",[t._v("不使用")])])])}),[],!1,null,null,null);a.default=s.exports}}]);